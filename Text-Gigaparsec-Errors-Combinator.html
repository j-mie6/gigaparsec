<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Text.Gigaparsec.Errors.Combinator</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">gigaparsec-0.3.0.0: Refreshed parsec-style library for compatibility with Scala parsley</span><ul class="links" id="page-menu"><li><a href="src/Text.Gigaparsec.Errors.Combinator.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>License</th><td>BSD-3-Clause</td></tr><tr><th>Maintainer</th><td>Jamie Willis, Gigaparsec Maintainers</td></tr><tr><th>Stability</th><td>stable</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Text.Gigaparsec.Errors.Combinator</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Error Enrichment Combinators</a></li><li><a href="#g:2">Failure Combinators</a></li><li><a href="#g:3">Error Adjustment Combinators</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Error messages are, by default, not <em>particularly</em> descriptive. However, the combinators in this
module can be used to improve the generation of error messages by providing labels for expected
items, explanations for why things went wrong, custom error messages, custom unexpected error messages,
as well as correcting the offsets that error messages actually occurred at.</p><h4>Terminology</h4><p><strong>Observably consumes input</strong>: a parser is said to <em>observably</em> consume input when error messages generated by a parser <code>p</code> occur at a deeper
offset than <code>p</code> originally started at. While this sounds like it is the same as &quot;having consumed input&quot; for the
purposes of backtracking, they are disjoint concepts:</p><ol><li value="1">in <code>atomic p</code>, <code>p</code> can <em>observably</em> consume input even though the wider parser does not consume input due to the <code>atomic</code>.</li><li value="2">in <code>amend p</code>, <code>p</code> can consume input and may not backtrack even though the consumption is not <em>observable</em> in the error
     message due to the <code>amend</code>.</li></ol><p><em>Since: 0.2.0.0</em></p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:label">label</a> :: <a href="https://hackage.haskell.org/package/containers-0.6.8/docs/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:-60--63--62-">(&lt;?&gt;)</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="https://hackage.haskell.org/package/containers-0.6.8/docs/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:hide">hide</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:explain">explain</a> :: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:emptyWide">emptyWide</a> :: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:fail">fail</a> :: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:failWide">failWide</a> :: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:unexpected">unexpected</a> :: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:unexpectedWide">unexpectedWide</a> :: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:amend">amend</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:partialAmend">partialAmend</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:entrench">entrench</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:dislodge">dislodge</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:dislodgeBy">dislodgeBy</a> :: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:amendThenDislodge">amendThenDislodge</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:amendThenDislodgeBy">amendThenDislodgeBy</a> :: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:partialAmendThenDislodge">partialAmendThenDislodge</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:partialAmendThenDislodgeBy">partialAmendThenDislodgeBy</a> :: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:markAsToken">markAsToken</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:filterSWith">filterSWith</a> :: <a href="Text-Gigaparsec-Errors-ErrorGen.html#t:ErrorGen" title="Text.Gigaparsec.Errors.ErrorGen">ErrorGen</a> a -&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:mapMaybeSWith">mapMaybeSWith</a> :: <a href="Text-Gigaparsec-Errors-ErrorGen.html#t:ErrorGen" title="Text.Gigaparsec.Errors.ErrorGen">ErrorGen</a> a -&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> b</li><li class="src short"><a href="#v:filterOut">filterOut</a> :: (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a>) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:guardAgainst">guardAgainst</a> :: (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [<a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a>]) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:unexpectedWhen">unexpectedWhen</a> :: (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a>) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:unexpectedWithReasonWhen">unexpectedWithReasonWhen</a> :: (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a>, <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a>)) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</li><li class="src short"><a href="#v:mapEitherS">mapEitherS</a> :: (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Either.html#t:Either" title="Data.Either">Either</a> (<a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a>) b) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> b</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Error Enrichment Combinators</h1></a><div class="doc"><p>These combinators add additional information - or refine the existing information within - to
 an error message that has been generated within the scope of the parser they have been called on.
 These are a very basic, but effective, way of improving the quality of error messages generated
 by gigaparsec.</p></div><div class="top"><p class="src"><a id="v:label" class="def">label</a> <a href="src/Text.Gigaparsec.Errors.Combinator.html#label" class="link">Source</a> <a href="#v:label" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="https://hackage.haskell.org/package/containers-0.6.8/docs/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>the names to give to the expected component of any qualifying errors.</p></td></tr><tr><td class="src">-&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</td><td class="doc"><p>the parser to apply the labels to</p></td></tr><tr><td class="src">-&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>This combinator changes the expected component of any errors generated by this parser.</p><p>When this parser fails having not <em>observably</em> consumed input, the expected component of the generated
error message is set to be the given items.</p></div></div><div class="top"><p class="src"><a id="v:-60--63--62-" class="def">(&lt;?&gt;)</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="https://hackage.haskell.org/package/containers-0.6.8/docs/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <span class="fixity">infix 0</span><span class="rightedge"></span> <a href="src/Text.Gigaparsec.Errors.Combinator.html#%3C%3F%3E" class="link">Source</a> <a href="#v:-60--63--62-" class="selflink">#</a></p><div class="doc"><p>This combinator changes the expected component of any errors generated by this parser.</p><p>This is just an alias for the <code><a href="Text-Gigaparsec-Errors-Combinator.html#v:label" title="Text.Gigaparsec.Errors.Combinator">label</a></code> combinator.</p></div></div><div class="top"><p class="src"><a id="v:hide" class="def">hide</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#hide" class="link">Source</a> <a href="#v:hide" class="selflink">#</a></p><div class="doc"><p>This combinator suppresses the entire error message generated by a given parser.</p><p>When this parser fails having not <em>observably</em> consumed input, this combinator
replaces any error generated by the given parser to match the <code><a href="Text-Gigaparsec.html#v:empty" title="Text.Gigaparsec">empty</a></code> combinator.</p><p>This can be useful, say, for hiding whitespace labels, which are not normally useful
information to include in an error message for whitespace insensitive grammars.</p></div></div><div class="top"><p class="src"><a id="v:explain" class="def">explain</a> <a href="src/Text.Gigaparsec.Errors.Combinator.html#explain" class="link">Source</a> <a href="#v:explain" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>reason the reason why a parser failed.</p></td></tr><tr><td class="src">-&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</td><td class="doc"><p>the parser to apply the reason to</p></td></tr><tr><td class="src">-&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>This combinator adds a reason to error messages generated by this parser.</p><p>When this parser fails having not <em>observably</em> consumed input, this combinator adds
a reason to the error message, which should justify why the error occured. Unlike error
labels, which may persist if more progress is made having not consumed input, reasons
are not carried forward in the error message, and are lost.</p></div></div><a href="#g:2" id="g:2"><h1>Failure Combinators</h1></a><div class="doc"><p>These combinators immediately fail the parser, with a more bespoke message.</p></div><div class="top"><p class="src"><a id="v:emptyWide" class="def">emptyWide</a> <a href="src/Text.Gigaparsec.Errors.Combinator.html#emptyWide" class="link">Source</a> <a href="#v:emptyWide" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Word.html#t:Word" title="Data.Word">Word</a></td><td class="doc"><p>the width of the caret for the error produced by this combinator.</p></td></tr><tr><td class="src">-&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>This combinator fails immediately, with a caret of the given width and no other information.</p><p>By producing basically no information, this combinator is principally for adjusting the
caret-width of another error, rather than the value <code><a href="Text-Gigaparsec.html#v:empty" title="Text.Gigaparsec">empty</a></code>, which is used to fail with
no effect on error content.</p></div></div><div class="top"><p class="src"><a id="v:fail" class="def">fail</a> <a href="src/Text.Gigaparsec.Errors.Combinator.html#fail" class="link">Source</a> <a href="#v:fail" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>the messages that will make up the error message.</p></td></tr><tr><td class="src">-&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>This combinator consumes no input and fails immediately with the given error messages.</p><p>Produces a <em>specialised</em> error message where all the lines of the error are the
given <code>msgs</code> in order of appearance.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:fail0">Examples</h4><details id="ch:fail0"><summary class="hide-when-js-enabled">Expand</summary><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let failing = fail [&quot;hello,&quot;, &quot;this is an error message&quot;, &quot;broken across multiple lines&quot;]
</code></strong></pre></details></div></div><div class="top"><p class="src"><a id="v:failWide" class="def">failWide</a> <a href="src/Text.Gigaparsec.Errors.Combinator.html#failWide" class="link">Source</a> <a href="#v:failWide" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Word.html#t:Word" title="Data.Word">Word</a></td><td class="doc"><p>the width of the caret for the error produced by this combinator.</p></td></tr><tr><td class="src">-&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>the messages that will make up the error message.</p></td></tr><tr><td class="src">-&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>This combinator consumes no input and fails immediately with the given error messages.</p><p>Produces a <em>specialised</em> error message where all the lines of the error are the
given <code>msgs</code> in order of appearance. The caret width of the message is set to the
given value.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:failWide0">Examples</h4><details id="ch:failWide0"><summary class="hide-when-js-enabled">Expand</summary><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let failing = fail 3 [&quot;hello,&quot;, &quot;this is an error message&quot;, &quot;broken across multiple lines&quot;]
</code></strong></pre></details></div></div><div class="top"><p class="src"><a id="v:unexpected" class="def">unexpected</a> <a href="src/Text.Gigaparsec.Errors.Combinator.html#unexpected" class="link">Source</a> <a href="#v:unexpected" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>the unexpected message for the error generated.</p></td></tr><tr><td class="src">-&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>This combinator consumes no input and fails immediately, setting the unexpected component
to the given item.</p><p>Produces a <em>trivial</em> error message where the unexpected component of the error is
replaced with the given item.</p></div></div><div class="top"><p class="src"><a id="v:unexpectedWide" class="def">unexpectedWide</a> <a href="src/Text.Gigaparsec.Errors.Combinator.html#unexpectedWide" class="link">Source</a> <a href="#v:unexpectedWide" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Word.html#t:Word" title="Data.Word">Word</a></td><td class="doc"><p>the width of the caret for the error produced by this combinator.</p></td></tr><tr><td class="src">-&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>the unexpected message for the error generated.</p></td></tr><tr><td class="src">-&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>This combinator consumes no input and fails immediately, setting the unexpected component
to the given item.</p><p>Produces a <em>trivial</em> error message where the unexpected component of the error is
replaced with the given item. The caret width of the message is set to the
given value.</p></div></div><a href="#g:3" id="g:3"><h1>Error Adjustment Combinators</h1></a><div class="doc"><p>These combinators can affect at what position an error is caused at. They are
 opposites: where <code><a href="Text-Gigaparsec-Errors-Combinator.html#v:amend" title="Text.Gigaparsec.Errors.Combinator">amend</a></code> will ensure an error message is said to have generated
 at the position on entry to the combinator, <code><a href="Text-Gigaparsec-Errors-Combinator.html#v:entrench" title="Text.Gigaparsec.Errors.Combinator">entrench</a></code> will resist these changes.</p></div><div class="top"><p class="src"><a id="v:amend" class="def">amend</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#amend" class="link">Source</a> <a href="#v:amend" class="selflink">#</a></p><div class="doc"><p>This combinator adjusts any error messages generated by the given parser so that they
occur at the position recorded on entry to this combinator (effectively as if no
input were consumed).</p><p>This is useful if validation work is done
on the output of a parser that may render it invalid, but the error should point to the
beginning of the structure. This combinators effect can be cancelled with <code><a href="Text-Gigaparsec-Errors-Combinator.html#v:entrench" title="Text.Gigaparsec.Errors.Combinator">entrench</a></code>.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:amend0">Examples</h4><details id="ch:amend0"><summary class="hide-when-js-enabled">Expand</summary><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let greeting = string &quot;hello world&quot; &lt;* char '!'
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>parseRepl (greeting &lt;?&gt; [&quot;greeting&quot;]) &quot;hello world.&quot;
</code></strong>(line 1, column 12):
  unexpected &quot;.&quot;
  expected &quot;!&quot;
  &gt;hello world.
              ^
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>parseRepl (amend greeting &lt;?&gt; [&quot;greeting&quot;]) &quot;hello world.&quot;
</code></strong>(line 1, column 1):
  unexpected &quot;h&quot;
  expected greeting
  &gt;hello world.
   ^
</pre></details></div></div><div class="top"><p class="src"><a id="v:partialAmend" class="def">partialAmend</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#partialAmend" class="link">Source</a> <a href="#v:partialAmend" class="selflink">#</a></p><div class="doc"><p>This combinator adjusts any error messages generated by the given parser so that they
occur at the position recorded on entry to this combinator, but retains the original offset.</p><p>Similar to <code><a href="Text-Gigaparsec-Errors-Combinator.html#v:amend" title="Text.Gigaparsec.Errors.Combinator">amend</a></code>, but retains the original offset the error occurred at. This is known
as its <em>underlying offset</em> as opposed to the visual <em>presentation offset</em>. To the reader, the
error messages appears as if no input was consumed, but for the purposes of error message merging
the error is still deeper. A key thing to note is that two errors can only merge if they are at
the same presentation <em>and</em> underlying offsets: if they are not the deeper of the two <em>dominates</em>.</p><p>The ability for an error to still dominate others after partial amendment can be useful for allowing
it to avoid being lost when merging with errors that are deeper than the presentation offset but
shallower than the underlying.</p></div></div><div class="top"><p class="src"><a id="v:entrench" class="def">entrench</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#entrench" class="link">Source</a> <a href="#v:entrench" class="selflink">#</a></p><div class="doc"><p>This combinator prevents the action of any enclosing <code><a href="Text-Gigaparsec-Errors-Combinator.html#v:amend" title="Text.Gigaparsec.Errors.Combinator">amend</a></code> on the errors generated by the given
parser.</p><p>Sometimes, the error adjustments performed by <code><a href="Text-Gigaparsec-Errors-Combinator.html#v:amend" title="Text.Gigaparsec.Errors.Combinator">amend</a></code> should only affect errors generated
within a certain part of a parser and not the whole thing; in this case, <code><a href="Text-Gigaparsec-Errors-Combinator.html#v:entrench" title="Text.Gigaparsec.Errors.Combinator">entrench</a></code> can be used
to protect sub-parsers from having their errors adjusted, providing a much more fine-grained
scope for error adjustment.</p></div></div><div class="top"><p class="src"><a id="v:dislodge" class="def">dislodge</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#dislodge" class="link">Source</a> <a href="#v:dislodge" class="selflink">#</a></p><div class="doc"><p>This combinator undoes the action of any <code><a href="Text-Gigaparsec-Errors-Combinator.html#v:entrench" title="Text.Gigaparsec.Errors.Combinator">entrench</a></code> combinators on the given parser.</p><p>Entrenchment is important for preventing the incorrect amendment of certain parts of sub-errors
for a parser, but it may be then undesireable to block further amendments from elsewhere in the
parser. This combinator can be used to cancel all entrenchment after the critical section has
passed.</p></div></div><div class="top"><p class="src"><a id="v:dislodgeBy" class="def">dislodgeBy</a> :: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#dislodgeBy" class="link">Source</a> <a href="#v:dislodgeBy" class="selflink">#</a></p><div class="doc"><p>This combinator undoes the action of the given number of <code><a href="Text-Gigaparsec-Errors-Combinator.html#v:entrench" title="Text.Gigaparsec.Errors.Combinator">entrench</a></code> combinators on the given parser.</p><p>Entrenchment is important for preventing the incorrect amendment of certain parts of sub-errors
for a parser, but it may be then undesireable to block further amendments from elsewhere in the
parser. This combinator can be used to cancel all entrenchment after the critical section has
passed.</p></div></div><div class="top"><p class="src"><a id="v:amendThenDislodge" class="def">amendThenDislodge</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#amendThenDislodge" class="link">Source</a> <a href="#v:amendThenDislodge" class="selflink">#</a></p><div class="doc"><p>This combinator first tries to amend the position of any error generated by the given parser,
and if the error was entrenched will dislodge it instead.</p></div></div><div class="top"><p class="src"><a id="v:amendThenDislodgeBy" class="def">amendThenDislodgeBy</a> :: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#amendThenDislodgeBy" class="link">Source</a> <a href="#v:amendThenDislodgeBy" class="selflink">#</a></p><div class="doc"><p>This combinator first tries to amend the position of any error generated by the given parser,
and if the error was entrenched will dislodge it the given number of times instead.</p></div></div><div class="top"><p class="src"><a id="v:partialAmendThenDislodge" class="def">partialAmendThenDislodge</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#partialAmendThenDislodge" class="link">Source</a> <a href="#v:partialAmendThenDislodge" class="selflink">#</a></p><div class="doc"><p>This combinator first tries to partially amend the position of any error generated by the given parser,
and if the error was entrenched will dislodge it instead.</p></div></div><div class="top"><p class="src"><a id="v:partialAmendThenDislodgeBy" class="def">partialAmendThenDislodgeBy</a> :: <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#partialAmendThenDislodgeBy" class="link">Source</a> <a href="#v:partialAmendThenDislodgeBy" class="selflink">#</a></p><div class="doc"><p>This combinator first tries to partially amend the position of any error generated by the given parser,
and if the error was entrenched will dislodge it the given number of times instead.</p></div></div><div class="top"><p class="src"><a id="v:markAsToken" class="def">markAsToken</a> :: <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#markAsToken" class="link">Source</a> <a href="#v:markAsToken" class="selflink">#</a></p><div class="doc"><p>This combinator marks any errors within the given parser as being <em>lexical errors</em>.</p><p>When an error is marked as a <em>lexical error</em>, it sets a flag within the error that is
passed to <code><a href="Text-Gigaparsec-Errors-ErrorBuilder.html#v:unexpectedToken" title="Text.Gigaparsec.Errors.ErrorBuilder">unexpectedToken</a></code>: this
should be used to prevent <code>Lexer</code>-based token extraction from being performed on an error,
since lexing errors cannot be the result of unexpected tokens.</p></div></div><div class="top"><p class="src"><a id="v:filterSWith" class="def">filterSWith</a> :: <a href="Text-Gigaparsec-Errors-ErrorGen.html#t:ErrorGen" title="Text.Gigaparsec.Errors.ErrorGen">ErrorGen</a> a -&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#filterSWith" class="link">Source</a> <a href="#v:filterSWith" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mapMaybeSWith" class="def">mapMaybeSWith</a> :: <a href="Text-Gigaparsec-Errors-ErrorGen.html#t:ErrorGen" title="Text.Gigaparsec.Errors.ErrorGen">ErrorGen</a> a -&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> b <a href="src/Text.Gigaparsec.Errors.Combinator.html#mapMaybeSWith" class="link">Source</a> <a href="#v:mapMaybeSWith" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:filterOut" class="def">filterOut</a> :: (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a>) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#filterOut" class="link">Source</a> <a href="#v:filterOut" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:guardAgainst" class="def">guardAgainst</a> :: (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [<a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a>]) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#guardAgainst" class="link">Source</a> <a href="#v:guardAgainst" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:unexpectedWhen" class="def">unexpectedWhen</a> :: (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a>) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#unexpectedWhen" class="link">Source</a> <a href="#v:unexpectedWhen" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:unexpectedWithReasonWhen" class="def">unexpectedWithReasonWhen</a> :: (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a>, <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a>)) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a <a href="src/Text.Gigaparsec.Errors.Combinator.html#unexpectedWithReasonWhen" class="link">Source</a> <a href="#v:unexpectedWithReasonWhen" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mapEitherS" class="def">mapEitherS</a> :: (a -&gt; <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-Either.html#t:Either" title="Data.Either">Either</a> (<a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="https://hackage.haskell.org/package/base-4.19.1.0/docs/Data-String.html#t:String" title="Data.String">String</a>) b) -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> a -&gt; <a href="Text-Gigaparsec.html#t:Parsec" title="Text.Gigaparsec">Parsec</a> b <a href="src/Text.Gigaparsec.Errors.Combinator.html#mapEitherS" class="link">Source</a> <a href="#v:mapEitherS" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.30.0</p></div></body></html>