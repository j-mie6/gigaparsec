<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE Safe #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-missing-import-lists #-}</span><span>
</span><span id="line-3"></span><span class="annot"><span class="hs-comment">{-|
Module      : Text.Gigaparsec.Errors.Combinator
Description : This module contains combinators that can be used to directly influence error
              messages of parsers.
License     : BSD-3-Clause
Maintainer  : Jamie Willis, Gigaparsec Maintainers
Stability   : stable

Error messages are, by default, not /particularly/ descriptive. However, the combinators in this
module can be used to improve the generation of error messages by providing labels for expected
items, explanations for why things went wrong, custom error messages, custom unexpected error messages,
as well as correcting the offsets that error messages actually occurred at.

==== Terminology

__Observably consumes input__: a parser is said to /observably/ consume input when error messages generated by a parser @p@ occur at a deeper
offset than @p@ originally started at. While this sounds like it is the same as &quot;having consumed input&quot; for the
purposes of backtracking, they are disjoint concepts:

  1. in @atomic p@, @p@ can /observably/ consume input even though the wider parser does not consume input due to the @atomic@.
  2. in @amend p@, @p@ can consume input and may not backtrack even though the consumption is not /observable/ in the error
     message due to the @amend@.

@since 0.2.0.0
-}</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Text.Gigaparsec.Errors.Combinator</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Error Enrichment Combinators</span></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-comment">-- | These combinators add additional information - or refine the existing information within - to</span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-comment">-- an error message that has been generated within the scope of the parser they have been called on.</span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-comment">-- These are a very basic, but effective, way of improving the quality of error messages generated</span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-comment">-- by gigaparsec.</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#label"><span class="hs-keyword">label</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#%3C%3F%3E"><span class="hs-operator">(&lt;?&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#hide"><span class="hs-identifier">hide</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#explain"><span class="hs-identifier">explain</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Failure Combinators</span></span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><span class="hs-comment">-- | These combinators immediately fail the parser, with a more bespoke message.</span></span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#emptyWide"><span class="hs-identifier">emptyWide</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#fail"><span class="hs-identifier">fail</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#failWide"><span class="hs-identifier">failWide</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#unexpected"><span class="hs-identifier">unexpected</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#unexpectedWide"><span class="hs-identifier">unexpectedWide</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Error Adjustment Combinators</span></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-comment">-- | These combinators can affect at what position an error is caused at. They are</span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-comment">-- opposites: where 'amend' will ensure an error message is said to have generated</span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-comment">-- at the position on entry to the combinator, 'entrench' will resist these changes.</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#amend"><span class="hs-identifier">amend</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#partialAmend"><span class="hs-identifier">partialAmend</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#entrench"><span class="hs-identifier">entrench</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#dislodge"><span class="hs-identifier">dislodge</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#dislodgeBy"><span class="hs-identifier">dislodgeBy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#amendThenDislodge"><span class="hs-identifier">amendThenDislodge</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#amendThenDislodgeBy"><span class="hs-identifier">amendThenDislodgeBy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#partialAmendThenDislodge"><span class="hs-identifier">partialAmendThenDislodge</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#partialAmendThenDislodgeBy"><span class="hs-identifier">partialAmendThenDislodgeBy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#markAsToken"><span class="hs-identifier">markAsToken</span></a></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-comment">{-
Future doc headings:

Filtering Combinators
=====================
These combinators perform filtering on a parser, with particular emphasis on generating meaningful
error messages if the filtering fails. This is particularly useful for data validation within the
parser, as very instructive error messages describing what went wrong can be generated. These combinators
often filter using a `PartialFunction`: this may be because they combine filtering with mapping (in which
case, the error message is provided separately), or the function may produce a `String`.

In these cases, the partial function is producing the error messages: if the input to the function is
defined, this means that it is invalid and the filtering will fail using the message obtained from the
successful partial function invocation.

Generic Filtering Combinators
=============================
This combinators generalise the combinators from above, which are all special cases of them. Each of these
takes the characteristic predicate or function of the regular variants, but takes an `errGen` object that
can be used to fine-tune the error messages. These offer some flexiblity not offered by the specialised
filtering combinators, but are a little more verbose to use.
-}</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fail</span></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Text.Gigaparsec.html"><span class="hs-identifier">Text.Gigaparsec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier">Parsec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-comment">-- We want to use this to make the docs point to the right definition for users.</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html"><span class="hs-identifier">Text.Gigaparsec.Internal</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Internal</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier">Parsec</span></a></span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier">Parsec</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#line"><span class="hs-identifier">line</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#col"><span class="hs-identifier">col</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#emptyErr"><span class="hs-identifier">emptyErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#specialisedErr"><span class="hs-identifier">specialisedErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#raise"><span class="hs-identifier">raise</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#unexpectedErr"><span class="hs-identifier">unexpectedErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#hints"><span class="hs-identifier">hints</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#consumed"><span class="hs-identifier">consumed</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#useHints"><span class="hs-identifier">useHints</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#adjustErr"><span class="hs-identifier">adjustErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#hints"><span class="hs-identifier">hints</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#hintsValidOffset"><span class="hs-identifier">hintsValidOffset</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html"><span class="hs-identifier">Text.Gigaparsec.Internal.Errors</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#ParseError"><span class="hs-identifier">ParseError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#CaretWidth"><span class="hs-identifier">CaretWidth</span></a></span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#FlexibleCaret"><span class="hs-identifier">FlexibleCaret</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#RigidCaret"><span class="hs-identifier">RigidCaret</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#ExpectItem"><span class="hs-identifier">ExpectItem</span></a></span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#ExpectNamed"><span class="hs-identifier">ExpectNamed</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html"><span class="hs-identifier">Text.Gigaparsec.Internal.Errors</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Internal</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#setLexical"><span class="hs-identifier">setLexical</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#amendErr"><span class="hs-identifier">amendErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#entrenchErr"><span class="hs-identifier">entrenchErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#dislodgeErr"><span class="hs-identifier">dislodgeErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#partialAmendErr"><span class="hs-identifier">partialAmendErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#labelErr"><span class="hs-identifier">labelErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#explainErr"><span class="hs-identifier">explainErr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Require.html"><span class="hs-identifier">Text.Gigaparsec.Internal.Require</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Internal.Require.html#require"><span class="hs-identifier">require</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Set</span></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">empty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">map</span></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">toList</span></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="annot"><span class="hs-comment">{-|
This combinator changes the expected component of any errors generated by this parser.

When this parser fails having not /observably/ consumed input, the expected component of the generated
error message is set to be the given items.
-}</span></span><span>
</span><span id="line-92"></span><span id="local-6989586621679064223"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#label"><span class="hs-keyword hs-type">label</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ the names to give to the expected component of any qualifying errors.</span></span><span>
</span><span id="line-93"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064223"><span class="hs-identifier hs-type">a</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ the parser to apply the labels to</span></span><span>
</span><span id="line-94"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064223"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-95"></span><span id="label"><span class="annot"><span class="annottext">label :: forall a. Set String -&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#label"><span class="hs-keyword hs-var hs-var">label</span></a></span></span><span> </span><span id="local-6989586621679064343"><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679064343"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Internal.Parsec</span></a></span><span> </span><span id="local-6989586621679064344"><span class="annot"><span class="annottext">forall r.
State
-&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r
</span><a href="#local-6989586621679064344"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-96"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; String -&gt; Parsec a -&gt; Parsec a
forall a. Bool -&gt; String -&gt; String -&gt; a -&gt; a
</span><a href="Text.Gigaparsec.Internal.Require.html#require"><span class="hs-identifier hs-var">require</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set String -&gt; Bool
forall a. Set a -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679064343"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; Set String -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679064343"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Text.Gigaparsec.Errors.Combinator.label&quot;</span></span><span>
</span><span id="line-97"></span><span>                                               </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;labels cannot be empty&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Parsec a -&gt; Parsec a) -&gt; Parsec a -&gt; Parsec a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><span class="annottext">(forall r.
 State
 -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
-&gt; Parsec a
forall a.
(forall r.
 State
 -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
-&gt; Parsec a
</span><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-var">Internal.Parsec</span></a></span><span> </span><span class="annot"><span class="annottext">((forall r.
  State
  -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
 -&gt; Parsec a)
-&gt; (forall r.
    State
    -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
-&gt; Parsec a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679064349"><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064349"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621679064350"><span class="annot"><span class="annottext">a -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064350"><span class="hs-identifier hs-var">good</span></a></span></span><span> </span><span id="local-6989586621679064351"><span class="annot"><span class="annottext">ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064351"><span class="hs-identifier hs-var">bad</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-99"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679064352"><span class="annot"><span class="annottext">origConsumed :: Word
</span><a href="#local-6989586621679064352"><span class="hs-identifier hs-var hs-var">origConsumed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">State -&gt; Word
</span><a href="Text.Gigaparsec.Internal.html#consumed"><span class="hs-identifier hs-var">Internal.consumed</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064349"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-100"></span><span>          </span><span id="local-6989586621679064357"><span class="annot"><span class="annottext">good' :: a -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064357"><span class="hs-identifier hs-var hs-var">good'</span></a></span></span><span> </span><span id="local-6989586621679064358"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679064358"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679064359"><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064359"><span class="hs-identifier hs-var">st'</span></a></span></span><span>
</span><span id="line-101"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">State -&gt; Word
</span><a href="Text.Gigaparsec.Internal.html#consumed"><span class="hs-identifier hs-var">Internal.consumed</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064359"><span class="hs-identifier hs-var">st'</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064352"><span class="hs-identifier hs-var">origConsumed</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064350"><span class="hs-identifier hs-var">good</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679064358"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064359"><span class="hs-identifier hs-var">st'</span></a></span><span>
</span><span id="line-102"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064350"><span class="hs-identifier hs-var">good</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679064358"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064359"><span class="hs-identifier hs-var">st'</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#hints"><span class="hs-identifier hs-var">Internal.hints</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set.map</span></span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#ExpectNamed"><span class="hs-identifier hs-type">ExpectNamed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064343"><span class="hs-identifier hs-type">ls</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-103"></span><span>          </span><span id="local-6989586621679064361"><span class="annot"><span class="annottext">bad' :: ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064361"><span class="hs-identifier hs-var hs-var">bad'</span></a></span></span><span> </span><span id="local-6989586621679064362"><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621679064362"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseError -&gt; State -&gt; RT r) -&gt; ParseError -&gt; State -&gt; RT r
forall r.
(ParseError -&gt; State -&gt; RT r) -&gt; ParseError -&gt; State -&gt; RT r
</span><a href="Text.Gigaparsec.Internal.html#useHints"><span class="hs-identifier hs-var">Internal.useHints</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064351"><span class="hs-identifier hs-var">bad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Set String -&gt; ParseError -&gt; ParseError
</span><a href="Text.Gigaparsec.Internal.Errors.html#labelErr"><span class="hs-identifier hs-var">Internal.labelErr</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064352"><span class="hs-identifier hs-var">origConsumed</span></a></span><span> </span><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679064343"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621679064362"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">State
-&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r
forall r.
State
-&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r
</span><a href="#local-6989586621679064344"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064349"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064357"><span class="hs-identifier hs-var">good'</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064361"><span class="hs-identifier hs-var">bad'</span></a></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="annot"><span class="hs-comment">{-|
This combinator suppresses the entire error message generated by a given parser.

When this parser fails having not /observably/ consumed input, this combinator
replaces any error generated by the given parser to match the 'Text.Gigaparsec.empty' combinator.

This can be useful, say, for hiding whitespace labels, which are not normally useful
information to include in an error message for whitespace insensitive grammars.
-}</span></span><span>
</span><span id="line-115"></span><span id="local-6989586621679064245"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#hide"><span class="hs-identifier hs-type">hide</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064245"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064245"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-116"></span><span id="hide"><span class="annot"><span class="annottext">hide :: forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#hide"><span class="hs-identifier hs-var hs-var">hide</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Internal.Parsec</span></a></span><span> </span><span id="local-6989586621679064363"><span class="annot"><span class="annottext">forall r.
State
-&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r
</span><a href="#local-6989586621679064363"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><span class="annottext">(forall r.
 State
 -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
-&gt; Parsec a
forall a.
(forall r.
 State
 -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
-&gt; Parsec a
</span><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-var">Internal.Parsec</span></a></span><span> </span><span class="annot"><span class="annottext">((forall r.
  State
  -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
 -&gt; Parsec a)
-&gt; (forall r.
    State
    -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
-&gt; Parsec a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679064364"><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064364"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621679064365"><span class="annot"><span class="annottext">a -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064365"><span class="hs-identifier hs-var">good</span></a></span></span><span> </span><span id="local-6989586621679064366"><span class="annot"><span class="annottext">ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064366"><span class="hs-identifier hs-var">bad</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679064367"><span class="annot"><span class="annottext">origConsumed :: Word
</span><a href="#local-6989586621679064367"><span class="hs-identifier hs-var hs-var">origConsumed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">State -&gt; Word
</span><a href="Text.Gigaparsec.Internal.html#consumed"><span class="hs-identifier hs-var">Internal.consumed</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064364"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-119"></span><span>        </span><span id="local-6989586621679064368"><span class="annot"><span class="annottext">good' :: a -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064368"><span class="hs-identifier hs-var hs-var">good'</span></a></span></span><span> </span><span id="local-6989586621679064369"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679064369"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679064370"><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064370"><span class="hs-identifier hs-var">st'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064365"><span class="hs-identifier hs-var">good</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679064369"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064370"><span class="hs-identifier hs-var">st'</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#hints"><span class="hs-identifier hs-var">Internal.hints</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set.empty</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-120"></span><span>        </span><span id="local-6989586621679064372"><span class="annot"><span class="annottext">bad' :: ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064372"><span class="hs-identifier hs-var hs-var">bad'</span></a></span></span><span> </span><span id="local-6989586621679064373"><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621679064373"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621679064374"><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064374"><span class="hs-identifier hs-var">st'</span></a></span></span><span>
</span><span id="line-121"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">State -&gt; Word
</span><a href="Text.Gigaparsec.Internal.html#consumed"><span class="hs-identifier hs-var">Internal.consumed</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064374"><span class="hs-identifier hs-var">st'</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064367"><span class="hs-identifier hs-var">origConsumed</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064366"><span class="hs-identifier hs-var">bad</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621679064373"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064374"><span class="hs-identifier hs-var">st'</span></a></span><span>
</span><span id="line-122"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseError -&gt; State -&gt; RT r) -&gt; ParseError -&gt; State -&gt; RT r
forall r.
(ParseError -&gt; State -&gt; RT r) -&gt; ParseError -&gt; State -&gt; RT r
</span><a href="Text.Gigaparsec.Internal.html#useHints"><span class="hs-identifier hs-var">Internal.useHints</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064366"><span class="hs-identifier hs-var">bad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">State -&gt; Word -&gt; ParseError
</span><a href="Text.Gigaparsec.Internal.html#emptyErr"><span class="hs-identifier hs-var">Internal.emptyErr</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064374"><span class="hs-identifier hs-var">st'</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064374"><span class="hs-identifier hs-var">st'</span></a></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">State
-&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r
forall r.
State
-&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r
</span><a href="#local-6989586621679064363"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064364"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064368"><span class="hs-identifier hs-var">good'</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064372"><span class="hs-identifier hs-var">bad'</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="annot"><span class="hs-comment">{-|
This combinator adds a reason to error messages generated by this parser.

When this parser fails having not /observably/ consumed input, this combinator adds
a reason to the error message, which should justify why the error occured. Unlike error
labels, which may persist if more progress is made having not consumed input, reasons
are not carried forward in the error message, and are lost.
-}</span></span><span>
</span><span id="line-133"></span><span id="local-6989586621679064249"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#explain"><span class="hs-identifier hs-type">explain</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ reason the reason why a parser failed.</span></span><span>
</span><span id="line-134"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064249"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ the parser to apply the reason to</span></span><span>
</span><span id="line-135"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064249"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-136"></span><span id="explain"><span class="annot"><span class="annottext">explain :: forall a. String -&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#explain"><span class="hs-identifier hs-var hs-var">explain</span></a></span></span><span> </span><span id="local-6989586621679064375"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679064375"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Internal.Parsec</span></a></span><span> </span><span id="local-6989586621679064376"><span class="annot"><span class="annottext">forall r.
State
-&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r
</span><a href="#local-6989586621679064376"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-137"></span><span>  </span><span class="annot"><span class="annottext">(forall r.
 State
 -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
-&gt; Parsec a
forall a.
(forall r.
 State
 -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
-&gt; Parsec a
</span><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-var">Internal.Parsec</span></a></span><span> </span><span class="annot"><span class="annottext">((forall r.
  State
  -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
 -&gt; Parsec a)
-&gt; (forall r.
    State
    -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
-&gt; Parsec a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679064377"><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064377"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621679064378"><span class="annot"><span class="annottext">a -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064378"><span class="hs-identifier hs-var">good</span></a></span></span><span> </span><span id="local-6989586621679064379"><span class="annot"><span class="annottext">ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064379"><span class="hs-identifier hs-var">bad</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679064380"><span class="annot"><span class="annottext">origConsumed :: Word
</span><a href="#local-6989586621679064380"><span class="hs-identifier hs-var hs-var">origConsumed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">State -&gt; Word
</span><a href="Text.Gigaparsec.Internal.html#consumed"><span class="hs-identifier hs-var">Internal.consumed</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064377"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-139"></span><span>        </span><span id="local-6989586621679064381"><span class="annot"><span class="annottext">bad' :: ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064381"><span class="hs-identifier hs-var hs-var">bad'</span></a></span></span><span> </span><span id="local-6989586621679064382"><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621679064382"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseError -&gt; State -&gt; RT r) -&gt; ParseError -&gt; State -&gt; RT r
forall r.
(ParseError -&gt; State -&gt; RT r) -&gt; ParseError -&gt; State -&gt; RT r
</span><a href="Text.Gigaparsec.Internal.html#useHints"><span class="hs-identifier hs-var">Internal.useHints</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064379"><span class="hs-identifier hs-var">bad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; String -&gt; ParseError -&gt; ParseError
</span><a href="Text.Gigaparsec.Internal.Errors.html#explainErr"><span class="hs-identifier hs-var">Internal.explainErr</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064380"><span class="hs-identifier hs-var">origConsumed</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679064375"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621679064382"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">State
-&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r
forall r.
State
-&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r
</span><a href="#local-6989586621679064376"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064377"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064378"><span class="hs-identifier hs-var">good</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064381"><span class="hs-identifier hs-var">bad'</span></a></span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="annot"><span class="hs-comment">{-|
This combinator fails immediately, with a caret of the given width and no other information.

By producing basically no information, this combinator is principally for adjusting the
caret-width of another error, rather than the value 'Text.Gigaparsec.empty', which is used to fail with
no effect on error content.
-}</span></span><span>
</span><span id="line-149"></span><span id="local-6989586621679064252"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#emptyWide"><span class="hs-identifier hs-type">emptyWide</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span>     </span><span class="annot"><span class="hs-comment">-- ^ the width of the caret for the error produced by this combinator.</span></span><span>
</span><span id="line-150"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064252"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-151"></span><span id="emptyWide"><span class="annot"><span class="annottext">emptyWide :: forall a. Word -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#emptyWide"><span class="hs-identifier hs-var hs-var">emptyWide</span></a></span></span><span> </span><span id="local-6989586621679064383"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064383"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(State -&gt; ParseError) -&gt; Parsec a
forall a. (State -&gt; ParseError) -&gt; Parsec a
</span><a href="Text.Gigaparsec.Internal.html#raise"><span class="hs-identifier hs-var">Internal.raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">State -&gt; Word -&gt; ParseError
</span><a href="Text.Gigaparsec.Internal.html#emptyErr"><span class="hs-operator hs-var">`Internal.emptyErr`</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064383"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="annot"><span class="hs-comment">{-|
This combinator consumes no input and fails immediately with the given error messages.

Produces a /specialised/ error message where all the lines of the error are the
given @msgs@ in order of appearance.

==== __Examples__
&gt;&gt;&gt; let failing = fail [&quot;hello,&quot;, &quot;this is an error message&quot;, &quot;broken across multiple lines&quot;]

-}</span></span><span>
</span><span id="line-163"></span><span id="local-6989586621679064255"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#fail"><span class="hs-identifier hs-type">fail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ the messages that will make up the error message.</span></span><span>
</span><span id="line-164"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064255"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-165"></span><span id="fail"><span class="annot"><span class="annottext">fail :: forall a. NonEmpty String -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#fail"><span class="hs-identifier hs-var hs-var">fail</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CaretWidth -&gt; NonEmpty String -&gt; Parsec a
forall a. CaretWidth -&gt; NonEmpty String -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#_fail"><span class="hs-identifier hs-var">_fail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; CaretWidth
</span><a href="Text.Gigaparsec.Internal.Errors.html#FlexibleCaret"><span class="hs-identifier hs-var">FlexibleCaret</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span class="annot"><span class="hs-comment">{-|
This combinator consumes no input and fails immediately with the given error messages.

Produces a /specialised/ error message where all the lines of the error are the
given @msgs@ in order of appearance. The caret width of the message is set to the
given value.

==== __Examples__
&gt;&gt;&gt; let failing = fail 3 [&quot;hello,&quot;, &quot;this is an error message&quot;, &quot;broken across multiple lines&quot;]

-}</span></span><span>
</span><span id="line-178"></span><span id="local-6989586621679064259"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#failWide"><span class="hs-identifier hs-type">failWide</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span>            </span><span class="annot"><span class="hs-comment">-- ^ the width of the caret for the error produced by this combinator.</span></span><span>
</span><span id="line-179"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ the messages that will make up the error message.</span></span><span>
</span><span id="line-180"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064259"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-181"></span><span id="failWide"><span class="annot"><span class="annottext">failWide :: forall a. Word -&gt; NonEmpty String -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#failWide"><span class="hs-identifier hs-var hs-var">failWide</span></a></span></span><span> </span><span id="local-6989586621679064385"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064385"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CaretWidth -&gt; NonEmpty String -&gt; Parsec a
forall a. CaretWidth -&gt; NonEmpty String -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#_fail"><span class="hs-identifier hs-var">_fail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; CaretWidth
</span><a href="Text.Gigaparsec.Internal.Errors.html#RigidCaret"><span class="hs-identifier hs-var">RigidCaret</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064385"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#_fail"><span class="hs-pragma hs-type">_fail</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-184"></span><span id="local-6989586621679064258"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#_fail"><span class="hs-identifier hs-type">_fail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#CaretWidth"><span class="hs-identifier hs-type">CaretWidth</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064258"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-185"></span><span id="_fail"><span class="annot"><span class="annottext">_fail :: forall a. CaretWidth -&gt; NonEmpty String -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#_fail"><span class="hs-identifier hs-var hs-var">_fail</span></a></span></span><span> </span><span id="local-6989586621679064386"><span class="annot"><span class="annottext">CaretWidth
</span><a href="#local-6989586621679064386"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621679064387"><span class="annot"><span class="annottext">NonEmpty String
</span><a href="#local-6989586621679064387"><span class="hs-identifier hs-var">msgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(State -&gt; ParseError) -&gt; Parsec a
forall a. (State -&gt; ParseError) -&gt; Parsec a
</span><a href="Text.Gigaparsec.Internal.html#raise"><span class="hs-identifier hs-var">Internal.raise</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679064388"><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064388"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">State -&gt; [String] -&gt; CaretWidth -&gt; ParseError
</span><a href="Text.Gigaparsec.Internal.html#specialisedErr"><span class="hs-identifier hs-var">Internal.specialisedErr</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064388"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty String -&gt; [String]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NonEmpty.toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty String
</span><a href="#local-6989586621679064387"><span class="hs-identifier hs-var">msgs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CaretWidth
</span><a href="#local-6989586621679064386"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="annot"><span class="hs-comment">{-|
This combinator consumes no input and fails immediately, setting the unexpected component
to the given item.

Produces a /trivial/ error message where the unexpected component of the error is
replaced with the given item.
-}</span></span><span>
</span><span id="line-194"></span><span id="local-6989586621679064263"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#unexpected"><span class="hs-identifier hs-type">unexpected</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ the unexpected message for the error generated.</span></span><span>
</span><span id="line-195"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064263"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-196"></span><span id="unexpected"><span class="annot"><span class="annottext">unexpected :: forall a. String -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#unexpected"><span class="hs-identifier hs-var hs-var">unexpected</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CaretWidth -&gt; String -&gt; Parsec a
forall a. CaretWidth -&gt; String -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#_unexpected"><span class="hs-identifier hs-var">_unexpected</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; CaretWidth
</span><a href="Text.Gigaparsec.Internal.Errors.html#FlexibleCaret"><span class="hs-identifier hs-var">FlexibleCaret</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="annot"><span class="hs-comment">{-|
This combinator consumes no input and fails immediately, setting the unexpected component
to the given item.

Produces a /trivial/ error message where the unexpected component of the error is
replaced with the given item. The caret width of the message is set to the
given value.
-}</span></span><span>
</span><span id="line-206"></span><span id="local-6989586621679064266"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#unexpectedWide"><span class="hs-identifier hs-type">unexpectedWide</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span>     </span><span class="annot"><span class="hs-comment">-- ^ the width of the caret for the error produced by this combinator.</span></span><span>
</span><span id="line-207"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ the unexpected message for the error generated.</span></span><span>
</span><span id="line-208"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064266"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-209"></span><span id="unexpectedWide"><span class="annot"><span class="annottext">unexpectedWide :: forall a. Word -&gt; String -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#unexpectedWide"><span class="hs-identifier hs-var hs-var">unexpectedWide</span></a></span></span><span> </span><span id="local-6989586621679064390"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064390"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CaretWidth -&gt; String -&gt; Parsec a
forall a. CaretWidth -&gt; String -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#_unexpected"><span class="hs-identifier hs-var">_unexpected</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; CaretWidth
</span><a href="Text.Gigaparsec.Internal.Errors.html#RigidCaret"><span class="hs-identifier hs-var">RigidCaret</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064390"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#_unexpected"><span class="hs-pragma hs-type">_unexpected</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-212"></span><span id="local-6989586621679064265"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#_unexpected"><span class="hs-identifier hs-type">_unexpected</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#CaretWidth"><span class="hs-identifier hs-type">CaretWidth</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064265"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-213"></span><span id="_unexpected"><span class="annot"><span class="annottext">_unexpected :: forall a. CaretWidth -&gt; String -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#_unexpected"><span class="hs-identifier hs-var hs-var">_unexpected</span></a></span></span><span> </span><span id="local-6989586621679064391"><span class="annot"><span class="annottext">CaretWidth
</span><a href="#local-6989586621679064391"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621679064392"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679064392"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(State -&gt; ParseError) -&gt; Parsec a
forall a. (State -&gt; ParseError) -&gt; Parsec a
</span><a href="Text.Gigaparsec.Internal.html#raise"><span class="hs-identifier hs-var">Internal.raise</span></a></span><span> </span><span class="annot"><span class="annottext">((State -&gt; ParseError) -&gt; Parsec a)
-&gt; (State -&gt; ParseError) -&gt; Parsec a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679064393"><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064393"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">State -&gt; Set ExpectItem -&gt; String -&gt; CaretWidth -&gt; ParseError
</span><a href="Text.Gigaparsec.Internal.html#unexpectedErr"><span class="hs-identifier hs-var">Internal.unexpectedErr</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064393"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">Set ExpectItem
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679064392"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">CaretWidth
</span><a href="#local-6989586621679064391"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="annot"><span class="hs-comment">{-|
This combinator adjusts any error messages generated by the given parser so that they
occur at the position recorded on entry to this combinator (effectively as if no
input were consumed).

This is useful if validation work is done
on the output of a parser that may render it invalid, but the error should point to the
beginning of the structure. This combinators effect can be cancelled with [[entrench `entrench`]].

==== __Examples__
&gt;&gt;&gt; let greeting = string &quot;hello world&quot; &lt;* char '!'
&gt;&gt;&gt; parseRepl (greeting &lt;?&gt; [&quot;greeting&quot;]) &quot;hello world.&quot;
(line 1, column 12):
  unexpected &quot;.&quot;
  expected &quot;!&quot;
  &gt;hello world.
              ^
&gt;&gt;&gt; parseRepl (amend greeting &lt;?&gt; [&quot;greeting&quot;]) &quot;hello world.&quot;
(line 1, column 1):
  unexpected &quot;h&quot;
  expected greeting
  &gt;hello world.
   ^
-}</span></span><span>
</span><span id="line-239"></span><span id="local-6989586621679064394"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#amend"><span class="hs-identifier hs-type">amend</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064394"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064394"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-240"></span><span id="amend"><span class="annot"><span class="annottext">amend :: forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#amend"><span class="hs-identifier hs-var hs-var">amend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Word -&gt; Word -&gt; ParseError -&gt; ParseError)
-&gt; Parsec a -&gt; Parsec a
forall a.
(Word -&gt; Word -&gt; Word -&gt; ParseError -&gt; ParseError)
-&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#_amend"><span class="hs-identifier hs-var">_amend</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word -&gt; ParseError -&gt; ParseError
</span><a href="Text.Gigaparsec.Internal.Errors.html#amendErr"><span class="hs-identifier hs-var">Internal.amendErr</span></a></span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span class="hs-comment">--TODO: examples</span><span>
</span><span id="line-243"></span><span class="annot"><span class="hs-comment">{-|
This combinator adjusts any error messages generated by the given parser so that they
occur at the position recorded on entry to this combinator, but retains the original offset.

Similar to 'amend', but retains the original offset the error occurred at. This is known
as its /underlying offset/ as opposed to the visual /presentation offset/. To the reader, the
error messages appears as if no input was consumed, but for the purposes of error message merging
the error is still deeper. A key thing to note is that two errors can only merge if they are at
the same presentation /and/ underlying offsets: if they are not the deeper of the two /dominates/.

The ability for an error to still dominate others after partial amendment can be useful for allowing
it to avoid being lost when merging with errors that are deeper than the presentation offset but
shallower than the underlying.
-}</span></span><span>
</span><span id="line-257"></span><span id="local-6989586621679064396"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#partialAmend"><span class="hs-identifier hs-type">partialAmend</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064396"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064396"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-258"></span><span id="partialAmend"><span class="annot"><span class="annottext">partialAmend :: forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#partialAmend"><span class="hs-identifier hs-var hs-var">partialAmend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Word -&gt; Word -&gt; ParseError -&gt; ParseError)
-&gt; Parsec a -&gt; Parsec a
forall a.
(Word -&gt; Word -&gt; Word -&gt; ParseError -&gt; ParseError)
-&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#_amend"><span class="hs-identifier hs-var">_amend</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word -&gt; ParseError -&gt; ParseError
</span><a href="Text.Gigaparsec.Internal.Errors.html#partialAmendErr"><span class="hs-identifier hs-var">Internal.partialAmendErr</span></a></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#_amend"><span class="hs-pragma hs-type">_amend</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-261"></span><span id="local-6989586621679064270"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#_amend"><span class="hs-identifier hs-type">_amend</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.Errors.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064270"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064270"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-262"></span><span id="_amend"><span class="annot"><span class="annottext">_amend :: forall a.
(Word -&gt; Word -&gt; Word -&gt; ParseError -&gt; ParseError)
-&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#_amend"><span class="hs-identifier hs-var hs-var">_amend</span></a></span></span><span> </span><span id="local-6989586621679064397"><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word -&gt; ParseError -&gt; ParseError
</span><a href="#local-6989586621679064397"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Internal.Parsec</span></a></span><span> </span><span id="local-6989586621679064398"><span class="annot"><span class="annottext">forall r.
State
-&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r
</span><a href="#local-6989586621679064398"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-263"></span><span>  </span><span class="annot"><span class="annottext">(forall r.
 State
 -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
-&gt; Parsec a
forall a.
(forall r.
 State
 -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
-&gt; Parsec a
</span><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-var">Internal.Parsec</span></a></span><span> </span><span class="annot"><span class="annottext">((forall r.
  State
  -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
 -&gt; Parsec a)
-&gt; (forall r.
    State
    -&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r)
-&gt; Parsec a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679064399"><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064399"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621679064400"><span class="annot"><span class="annottext">a -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064400"><span class="hs-identifier hs-var">good</span></a></span></span><span> </span><span id="local-6989586621679064401"><span class="annot"><span class="annottext">ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064401"><span class="hs-identifier hs-var">bad</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679064402"><span class="annot"><span class="annottext">origConsumed :: Word
</span><a href="#local-6989586621679064402"><span class="hs-identifier hs-var hs-var">origConsumed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">State -&gt; Word
</span><a href="Text.Gigaparsec.Internal.html#consumed"><span class="hs-identifier hs-var">Internal.consumed</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064399"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-265"></span><span>        </span><span class="hs-glyph">!</span><span id="local-6989586621679064403"><span class="annot"><span class="annottext">origLine :: Word
</span><a href="#local-6989586621679064403"><span class="hs-identifier hs-var hs-var">origLine</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">State -&gt; Word
</span><a href="Text.Gigaparsec.Internal.html#line"><span class="hs-identifier hs-var">Internal.line</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064399"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-266"></span><span>        </span><span class="hs-glyph">!</span><span id="local-6989586621679064404"><span class="annot"><span class="annottext">origCol :: Word
</span><a href="#local-6989586621679064404"><span class="hs-identifier hs-var hs-var">origCol</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">State -&gt; Word
</span><a href="Text.Gigaparsec.Internal.html#col"><span class="hs-identifier hs-var">Internal.col</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064399"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-267"></span><span>        </span><span class="hs-glyph">!</span><span id="local-6989586621679064405"><span class="annot"><span class="annottext">origHints :: Set ExpectItem
</span><a href="#local-6989586621679064405"><span class="hs-identifier hs-var hs-var">origHints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">State -&gt; Set ExpectItem
</span><a href="Text.Gigaparsec.Internal.html#hints"><span class="hs-identifier hs-var">Internal.hints</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064399"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-268"></span><span>        </span><span class="hs-glyph">!</span><span id="local-6989586621679064406"><span class="annot"><span class="annottext">origHintsValidOffset :: Word
</span><a href="#local-6989586621679064406"><span class="hs-identifier hs-var hs-var">origHintsValidOffset</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">State -&gt; Word
</span><a href="Text.Gigaparsec.Internal.html#hintsValidOffset"><span class="hs-identifier hs-var">Internal.hintsValidOffset</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064399"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-269"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">State
-&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r
forall r.
State
-&gt; (a -&gt; State -&gt; RT r) -&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r
</span><a href="#local-6989586621679064398"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064399"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064400"><span class="hs-identifier hs-var">good</span></a></span><span> </span><span class="annot"><span class="annottext">((ParseError -&gt; State -&gt; RT r) -&gt; RT r)
-&gt; (ParseError -&gt; State -&gt; RT r) -&gt; RT r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679064407"><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621679064407"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621679064408"><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064408"><span class="hs-identifier hs-var">st'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; State -&gt; RT r
</span><a href="#local-6989586621679064401"><span class="hs-identifier hs-var">bad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word -&gt; ParseError -&gt; ParseError
</span><a href="#local-6989586621679064397"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064402"><span class="hs-identifier hs-var">origConsumed</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064403"><span class="hs-identifier hs-var">origLine</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064404"><span class="hs-identifier hs-var">origCol</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621679064407"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>                                   </span><span class="annot"><span class="annottext">State
</span><a href="#local-6989586621679064408"><span class="hs-identifier hs-var">st'</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#hints"><span class="hs-identifier hs-var">Internal.hints</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679064405"><span class="hs-identifier hs-type">origHints</span></a></span><span>
</span><span id="line-271"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#hintsValidOffset"><span class="hs-identifier hs-var">Internal.hintsValidOffset</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679064406"><span class="hs-identifier hs-type">origHintsValidOffset</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="hs-comment">--TODO: examples</span><span>
</span><span id="line-274"></span><span class="annot"><span class="hs-comment">{-|
This combinator prevents the action of any enclosing 'amend' on the errors generated by the given
parser.

Sometimes, the error adjustments performed by 'amend' should only affect errors generated
within a certain part of a parser and not the whole thing; in this case, 'entrench' can be used
to protect sub-parsers from having their errors adjusted, providing a much more fine-grained
scope for error adjustment.
-}</span></span><span>
</span><span id="line-283"></span><span id="local-6989586621679064409"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#entrench"><span class="hs-identifier hs-type">entrench</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064409"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064409"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-284"></span><span id="entrench"><span class="annot"><span class="annottext">entrench :: forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#entrench"><span class="hs-identifier hs-var hs-var">entrench</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseError -&gt; ParseError) -&gt; Parsec a -&gt; Parsec a
forall a. (ParseError -&gt; ParseError) -&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Internal.html#adjustErr"><span class="hs-identifier hs-var">Internal.adjustErr</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; ParseError
</span><a href="Text.Gigaparsec.Internal.Errors.html#entrenchErr"><span class="hs-identifier hs-var">Internal.entrenchErr</span></a></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="annot"><span class="hs-comment">{-|
This combinator undoes the action of any 'entrench' combinators on the given parser.

Entrenchment is important for preventing the incorrect amendment of certain parts of sub-errors
for a parser, but it may be then undesireable to block further amendments from elsewhere in the
parser. This combinator can be used to cancel all entrenchment after the critical section has
passed.
-}</span></span><span>
</span><span id="line-294"></span><span id="local-6989586621679064410"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#dislodge"><span class="hs-identifier hs-type">dislodge</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064410"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064410"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-295"></span><span id="dislodge"><span class="annot"><span class="annottext">dislodge :: forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#dislodge"><span class="hs-identifier hs-var hs-var">dislodge</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Parsec a -&gt; Parsec a
forall a. Word -&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#dislodgeBy"><span class="hs-identifier hs-var">dislodgeBy</span></a></span><span> </span><span class="annot"><span class="annottext">Word
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="annot"><span class="hs-comment">{-|
This combinator undoes the action of the given number of 'entrench' combinators on the given parser.

Entrenchment is important for preventing the incorrect amendment of certain parts of sub-errors
for a parser, but it may be then undesireable to block further amendments from elsewhere in the
parser. This combinator can be used to cancel all entrenchment after the critical section has
passed.
-}</span></span><span>
</span><span id="line-305"></span><span id="local-6989586621679064277"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#dislodgeBy"><span class="hs-identifier hs-type">dislodgeBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064277"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064277"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-306"></span><span id="dislodgeBy"><span class="annot"><span class="annottext">dislodgeBy :: forall a. Word -&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#dislodgeBy"><span class="hs-identifier hs-var hs-var">dislodgeBy</span></a></span></span><span> </span><span id="local-6989586621679064414"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064414"><span class="hs-identifier hs-var">by</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseError -&gt; ParseError) -&gt; Parsec a -&gt; Parsec a
forall a. (ParseError -&gt; ParseError) -&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Internal.html#adjustErr"><span class="hs-identifier hs-var">Internal.adjustErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; ParseError -&gt; ParseError
</span><a href="Text.Gigaparsec.Internal.Errors.html#dislodgeErr"><span class="hs-identifier hs-var">Internal.dislodgeErr</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064414"><span class="hs-identifier hs-var">by</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span class="annot"><span class="hs-comment">{-|
This combinator first tries to amend the position of any error generated by the given parser,
and if the error was entrenched will dislodge it instead.
-}</span></span><span>
</span><span id="line-312"></span><span id="local-6989586621679064415"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#amendThenDislodge"><span class="hs-identifier hs-type">amendThenDislodge</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064415"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064415"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-313"></span><span id="amendThenDislodge"><span class="annot"><span class="annottext">amendThenDislodge :: forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#amendThenDislodge"><span class="hs-identifier hs-var hs-var">amendThenDislodge</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parsec a -&gt; Parsec a
forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#dislodge"><span class="hs-identifier hs-var">dislodge</span></a></span><span> </span><span class="annot"><span class="annottext">(Parsec a -&gt; Parsec a)
-&gt; (Parsec a -&gt; Parsec a) -&gt; Parsec a -&gt; Parsec a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parsec a -&gt; Parsec a
forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#amend"><span class="hs-identifier hs-var">amend</span></a></span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span class="annot"><span class="hs-comment">{-|
This combinator first tries to amend the position of any error generated by the given parser,
and if the error was entrenched will dislodge it the given number of times instead.
-}</span></span><span>
</span><span id="line-319"></span><span id="local-6989586621679064417"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#amendThenDislodgeBy"><span class="hs-identifier hs-type">amendThenDislodgeBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064417"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064417"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-320"></span><span id="amendThenDislodgeBy"><span class="annot"><span class="annottext">amendThenDislodgeBy :: forall a. Word -&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#amendThenDislodgeBy"><span class="hs-identifier hs-var hs-var">amendThenDislodgeBy</span></a></span></span><span> </span><span id="local-6989586621679064418"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064418"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Parsec a -&gt; Parsec a
forall a. Word -&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#dislodgeBy"><span class="hs-identifier hs-var">dislodgeBy</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064418"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(Parsec a -&gt; Parsec a)
-&gt; (Parsec a -&gt; Parsec a) -&gt; Parsec a -&gt; Parsec a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parsec a -&gt; Parsec a
forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#amend"><span class="hs-identifier hs-var">amend</span></a></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="annot"><span class="hs-comment">{-|
This combinator first tries to partially amend the position of any error generated by the given parser,
and if the error was entrenched will dislodge it instead.
-}</span></span><span>
</span><span id="line-326"></span><span id="local-6989586621679064419"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#partialAmendThenDislodge"><span class="hs-identifier hs-type">partialAmendThenDislodge</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064419"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064419"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-327"></span><span id="partialAmendThenDislodge"><span class="annot"><span class="annottext">partialAmendThenDislodge :: forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#partialAmendThenDislodge"><span class="hs-identifier hs-var hs-var">partialAmendThenDislodge</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parsec a -&gt; Parsec a
forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#dislodge"><span class="hs-identifier hs-var">dislodge</span></a></span><span> </span><span class="annot"><span class="annottext">(Parsec a -&gt; Parsec a)
-&gt; (Parsec a -&gt; Parsec a) -&gt; Parsec a -&gt; Parsec a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parsec a -&gt; Parsec a
forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#partialAmend"><span class="hs-identifier hs-var">partialAmend</span></a></span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span class="annot"><span class="hs-comment">{-|
This combinator first tries to partially amend the position of any error generated by the given parser,
and if the error was entrenched will dislodge it the given number of times instead.
-}</span></span><span>
</span><span id="line-333"></span><span id="local-6989586621679064420"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#partialAmendThenDislodgeBy"><span class="hs-identifier hs-type">partialAmendThenDislodgeBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064420"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064420"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-334"></span><span id="partialAmendThenDislodgeBy"><span class="annot"><span class="annottext">partialAmendThenDislodgeBy :: forall a. Word -&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#partialAmendThenDislodgeBy"><span class="hs-identifier hs-var hs-var">partialAmendThenDislodgeBy</span></a></span></span><span> </span><span id="local-6989586621679064421"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064421"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Parsec a -&gt; Parsec a
forall a. Word -&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#dislodgeBy"><span class="hs-identifier hs-var">dislodgeBy</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679064421"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(Parsec a -&gt; Parsec a)
-&gt; (Parsec a -&gt; Parsec a) -&gt; Parsec a -&gt; Parsec a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parsec a -&gt; Parsec a
forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#partialAmend"><span class="hs-identifier hs-var">partialAmend</span></a></span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span class="annot"><span class="hs-comment">{-|
This combinator marks any errors within the given parser as being /lexical errors/.

When an error is marked as a /lexical error/, it sets a flag within the error that is
passed to 'Text.Gigaparsec.Errors.ErrorBuilder.unexpectedToken': this
should be used to prevent @Lexer@-based token extraction from being performed on an error,
since lexing errors cannot be the result of unexpected tokens.
-}</span></span><span>
</span><span id="line-344"></span><span id="local-6989586621679064422"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#markAsToken"><span class="hs-identifier hs-type">markAsToken</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064422"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064422"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-345"></span><span id="markAsToken"><span class="annot"><span class="annottext">markAsToken :: forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#markAsToken"><span class="hs-identifier hs-var hs-var">markAsToken</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseError -&gt; ParseError) -&gt; Parsec a -&gt; Parsec a
forall a. (ParseError -&gt; ParseError) -&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Internal.html#adjustErr"><span class="hs-identifier hs-var">Internal.adjustErr</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; ParseError
</span><a href="Text.Gigaparsec.Internal.Errors.html#setLexical"><span class="hs-identifier hs-var">Internal.setLexical</span></a></span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span class="annot"><span class="hs-comment">{-|
This combinator changes the expected component of any errors generated by this parser.

This is just an alias for the 'label' combinator.
-}</span></span><span>
</span><span id="line-352"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;?&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-353"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">0</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#%3C%3F%3E"><span class="hs-operator hs-type">&lt;?&gt;</span></a></span><span>
</span><span id="line-354"></span><span id="local-6989586621679064288"><span class="annot"><a href="Text.Gigaparsec.Errors.Combinator.html#%3C%3F%3E"><span class="hs-operator hs-type">(&lt;?&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064288"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679064288"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-355"></span><span id="%3C%3F%3E"><span class="annot"><span class="annottext">&lt;?&gt; :: forall a. Parsec a -&gt; Set String -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#%3C%3F%3E"><span class="hs-operator hs-var hs-var">(&lt;?&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Set String -&gt; Parsec a -&gt; Parsec a)
-&gt; Parsec a -&gt; Set String -&gt; Parsec a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">Set String -&gt; Parsec a -&gt; Parsec a
forall a. Set String -&gt; Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.Errors.Combinator.html#label"><span class="hs-keyword hs-var">label</span></a></span><span>
</span><span id="line-356"></span></pre></body></html>