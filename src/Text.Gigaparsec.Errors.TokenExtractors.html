<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE Safe #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-incomplete-uni-patterns #-}</span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Text.Gigaparsec.Errors.TokenExtractors</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Token"><span class="hs-identifier">Token</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#TokenExtractor"><span class="hs-identifier">TokenExtractor</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#tillNextWhitespace"><span class="hs-identifier">tillNextWhitespace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#singleChar"><span class="hs-identifier">singleChar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#matchParserDemand"><span class="hs-identifier">matchParserDemand</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#lexToken"><span class="hs-identifier">lexToken</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#lexTokenWithSelect"><span class="hs-identifier">lexTokenWithSelect</span></a></span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Text.Gigaparsec.html"><span class="hs-identifier">Text.Gigaparsec</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier">Parsec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.html#Result"><span class="hs-identifier">Result</span></a></span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.html#Success"><span class="hs-identifier">Success</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.html#parse"><span class="hs-identifier">parse</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Text.Gigaparsec.html#atomic"><span class="hs-identifier">atomic</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.html#lookAhead"><span class="hs-identifier">lookAhead</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.html#notFollowedBy"><span class="hs-identifier">notFollowedBy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">some</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.html#%3C%2B%3E"><span class="hs-operator">(&lt;+&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.html#%3C~%3E"><span class="hs-operator">(&lt;~&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.Gigaparsec.html#mapMaybeS"><span class="hs-identifier">mapMaybeS</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Char.html"><span class="hs-identifier">Text.Gigaparsec.Char</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Char.html#item"><span class="hs-identifier">item</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Combinator.html"><span class="hs-identifier">Text.Gigaparsec.Combinator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Combinator.html#option"><span class="hs-identifier">option</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Position.html"><span class="hs-identifier">Text.Gigaparsec.Position</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.Gigaparsec.Position.html#offset"><span class="hs-identifier">offset</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Char</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">generalCategory</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ord</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">GeneralCategory</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Format</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Surrogate</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">PrivateUse</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">NotAssigned</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Control</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Char</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Char</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">isSpace</span></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(:|)</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">nonEmpty</span></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">toList</span></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Void</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Void</span></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">maximumBy</span></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Numeric</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">showHex</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Function</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">on</span></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">catMaybes</span></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="annot"><span class="hs-comment">{-|
Type alias for token extractors, matches the shape of
'Text.Gigaparsec.Errors.ErrorBuilder.unexpectedToken'.

@since 0.2.5.0
-}</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#TokenExtractor"><span class="hs-identifier hs-type">TokenExtractor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-operator">*</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">type</span><span> </span><span id="TokenExtractor"><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#TokenExtractor"><span class="hs-identifier hs-var">TokenExtractor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ the remaining input, @cs@, at point of failure.</span></span><span>
</span><span id="line-38"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span>         </span><span class="hs-comment">-- ^ the input the parser tried to read when it failed</span><span>
</span><span id="line-39"></span><span>                                    </span><span class="hs-comment">--   (this is __not__ guaranteed to be smaller than the length of</span><span>
</span><span id="line-40"></span><span>                                    </span><span class="hs-comment">--    @cs@, but is __guaranteed to be greater than 0__).</span><span>
</span><span id="line-41"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>         </span><span class="annot"><span class="hs-comment">-- ^ was this error generated as part of \&quot;lexing\&quot;, or in a wider parser (see 'Text.Gigaparsec.Errors.Combinator.markAsToken').</span></span><span>
</span><span id="line-42"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ a token extracted from @cs@ that will be used as part of the unexpected message.</span></span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="annot"><span class="hs-comment">{-|
This type represents an extracted token returned by 'Text.Gigaparsec.Errors.ErrorBuilder.unexpectedToken'
in 'Text.Gigaparsec.Errors.ErrorBuilder.ErrorBuilder'.

There is deliberately no analogue for @EndOfInput@ because we guarantee that non-empty
residual input is provided to token extraction.

@since 0.2.5.0
-}</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-operator">*</span></span><span>
</span><span id="line-54"></span><span class="hs-keyword">data</span><span> </span><span id="Token"><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Token"><span class="hs-identifier hs-var">Token</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Raw"><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Raw"><span class="hs-identifier hs-var">Raw</span></a></span></span><span>                   </span><span class="annot"><span class="hs-comment">-- ^ This is a token that is directly extracted from the residual input itself.</span></span><span>
</span><span id="line-55"></span><span>              </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>              </span><span class="annot"><span class="hs-comment">-- ^ the input extracted.</span></span><span>
</span><span id="line-56"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span id="Named"><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Named"><span class="hs-identifier hs-var">Named</span></a></span></span><span>                 </span><span class="annot"><span class="hs-comment">-- ^ This is a token that has been given a name, and is treated like a labelled item.</span></span><span>
</span><span id="line-57"></span><span>              </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>              </span><span class="annot"><span class="hs-comment">-- ^ the description of the token.</span></span><span>
</span><span id="line-58"></span><span>              </span><span class="hs-pragma">{-# UNPACK</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ the amount of residual input this token ate.</span></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#tillNextWhitespace"><span class="hs-pragma hs-type">tillNextWhitespace</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-61"></span><span class="annot"><span class="hs-comment">{-|
This extractor provides an implementation for 'Text.Gigaparsec.ErrorBuilder.unexpectedToken':
it will construct a token that extends to the next available whitespace in the remaining input.
It can be configured to constrict this token to the minimum of the next whitespace or whatever the
parser demanded.

In the case of unprintable characters or whitespace, this extractor will favour reporting a more
meaningful name.

@since 0.2.5.0
-}</span></span><span>
</span><span id="line-72"></span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#tillNextWhitespace"><span class="hs-identifier hs-type">tillNextWhitespace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>           </span><span class="annot"><span class="hs-comment">-- ^ should the extractor cap the token to the amount of input the parser demanded?</span></span><span>
</span><span id="line-73"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-comment">-- ^ what counts as a space character</span></span><span>
</span><span id="line-74"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#TokenExtractor"><span class="hs-identifier hs-type">TokenExtractor</span></a></span><span>
</span><span id="line-75"></span><span id="tillNextWhitespace"><span class="annot"><span class="annottext">tillNextWhitespace :: Bool -&gt; (Char -&gt; Bool) -&gt; TokenExtractor
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#tillNextWhitespace"><span class="hs-identifier hs-var hs-var">tillNextWhitespace</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty Char -&gt; Maybe Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#whitespaceOrUnprintable"><span class="hs-identifier hs-var">whitespaceOrUnprintable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679241466"><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679241466"><span class="hs-identifier hs-var">tok</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679241466"><span class="hs-identifier hs-var">tok</span></a></span><span>
</span><span id="line-76"></span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#tillNextWhitespace"><span class="hs-identifier hs-var">tillNextWhitespace</span></a></span><span> </span><span id="local-6989586621679241467"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679241467"><span class="hs-identifier hs-var">trimToDemand</span></a></span></span><span> </span><span id="local-6989586621679241468"><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679241468"><span class="hs-identifier hs-var">isSpace</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679241469"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679241469"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621679241470"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679241470"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679241471"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679241471"><span class="hs-identifier hs-var">parserDemanded</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679241467"><span class="hs-identifier hs-var">trimToDemand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Raw"><span class="hs-identifier hs-var">Raw</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Char] -&gt; [Char]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679241471"><span class="hs-identifier hs-var">parserDemanded</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; [Char]
</span><a href="#local-6989586621679241473"><span class="hs-identifier hs-var">tillSpace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679241469"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">Char -&gt; [Char] -&gt; [Char]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679241470"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Raw"><span class="hs-identifier hs-var">Raw</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; [Char]
</span><a href="#local-6989586621679241473"><span class="hs-identifier hs-var">tillSpace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679241469"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">Char -&gt; [Char] -&gt; [Char]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679241470"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679241473"><span class="annot"><span class="annottext">tillSpace :: [Char] -&gt; [Char]
</span><a href="#local-6989586621679241473"><span class="hs-identifier hs-var hs-var">tillSpace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; [Char] -&gt; [Char]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">takeWhile</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (Char -&gt; Bool) -&gt; Char -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679241468"><span class="hs-identifier hs-var">isSpace</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="annot"><span class="hs-comment">{-|
This extractor provides an implementation for 'Text.Gigaparsec.ErrorBuilder.unexpectedToken':
it will unconditionally report the first character in the remaining input as the problematic token.

In the case of unprintable characters or whitespace, this extractor will favour reporting
a more meaningful name.

@since 0.2.5.0
-}</span></span><span>
</span><span id="line-90"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#singleChar"><span class="hs-pragma hs-type">singleChar</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-91"></span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#singleChar"><span class="hs-identifier hs-type">singleChar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#TokenExtractor"><span class="hs-identifier hs-type">TokenExtractor</span></a></span><span>
</span><span id="line-92"></span><span id="singleChar"><span class="annot"><span class="annottext">singleChar :: TokenExtractor
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#singleChar"><span class="hs-identifier hs-var hs-var">singleChar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty Char -&gt; Maybe Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#whitespaceOrUnprintable"><span class="hs-identifier hs-var">whitespaceOrUnprintable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679241477"><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679241477"><span class="hs-identifier hs-var">tok</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679241477"><span class="hs-identifier hs-var">tok</span></a></span><span>
</span><span id="line-93"></span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#singleChar"><span class="hs-identifier hs-var">singleChar</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679241478"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679241478"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Raw"><span class="hs-identifier hs-var">Raw</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679241478"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="annot"><span class="hs-comment">{-|
This extractor provides an implementation for 'Text.Gigaparsec.ErrorBuilder.unexpectedToken':
it will make a token as wide as the amount of input the parser tried to consume when it failed.

In the case of unprintable characters or whitespace, this extractor will favour reporting a more
meaningful name.

@since 0.2.5.0
-}</span></span><span>
</span><span id="line-104"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#matchParserDemand"><span class="hs-pragma hs-type">matchParserDemand</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-105"></span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#matchParserDemand"><span class="hs-identifier hs-type">matchParserDemand</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#TokenExtractor"><span class="hs-identifier hs-type">TokenExtractor</span></a></span><span>
</span><span id="line-106"></span><span id="matchParserDemand"><span class="annot"><span class="annottext">matchParserDemand :: TokenExtractor
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#matchParserDemand"><span class="hs-identifier hs-var hs-var">matchParserDemand</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty Char -&gt; Maybe Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#whitespaceOrUnprintable"><span class="hs-identifier hs-var">whitespaceOrUnprintable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679241479"><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679241479"><span class="hs-identifier hs-var">tok</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679241479"><span class="hs-identifier hs-var">tok</span></a></span><span>
</span><span id="line-107"></span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#matchParserDemand"><span class="hs-identifier hs-var">matchParserDemand</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679241480"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679241480"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621679241481"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679241481"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679241482"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679241482"><span class="hs-identifier hs-var">parserDemanded</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Raw"><span class="hs-identifier hs-var">Raw</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Char] -&gt; [Char]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679241482"><span class="hs-identifier hs-var">parserDemanded</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679241480"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">Char -&gt; [Char] -&gt; [Char]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679241481"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#whitespaceOrUnprintable"><span class="hs-pragma hs-type">whitespaceOrUnprintable</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-110"></span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#whitespaceOrUnprintable"><span class="hs-identifier hs-type">whitespaceOrUnprintable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span>
</span><span id="line-111"></span><span id="whitespaceOrUnprintable"><span class="annot"><span class="annottext">whitespaceOrUnprintable :: NonEmpty Char -&gt; Maybe Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#whitespaceOrUnprintable"><span class="hs-identifier hs-var hs-var">whitespaceOrUnprintable</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Token -&gt; Maybe Token
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Maybe Token) -&gt; Token -&gt; Maybe Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Word -&gt; Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Named"><span class="hs-identifier hs-var">Named</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;newline&quot;</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-112"></span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#whitespaceOrUnprintable"><span class="hs-identifier hs-var">whitespaceOrUnprintable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\r'</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Token -&gt; Maybe Token
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Maybe Token) -&gt; Token -&gt; Maybe Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Word -&gt; Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Named"><span class="hs-identifier hs-var">Named</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;carriage return&quot;</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-113"></span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#whitespaceOrUnprintable"><span class="hs-identifier hs-var">whitespaceOrUnprintable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\t'</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Token -&gt; Maybe Token
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Maybe Token) -&gt; Token -&gt; Maybe Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Word -&gt; Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Named"><span class="hs-identifier hs-var">Named</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;tab&quot;</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-114"></span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#whitespaceOrUnprintable"><span class="hs-identifier hs-var">whitespaceOrUnprintable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Token -&gt; Maybe Token
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Maybe Token) -&gt; Token -&gt; Maybe Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Word -&gt; Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Named"><span class="hs-identifier hs-var">Named</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;space&quot;</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-115"></span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#whitespaceOrUnprintable"><span class="hs-identifier hs-var">whitespaceOrUnprintable</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679241483"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679241483"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">Char.isSpace</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679241483"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Token -&gt; Maybe Token
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Maybe Token) -&gt; Token -&gt; Maybe Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Word -&gt; Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Named"><span class="hs-identifier hs-var">Named</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;whitespace character&quot;</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Char -&gt; GeneralCategory
</span><span class="hs-identifier hs-var">generalCategory</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679241483"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><span class="annottext">GeneralCategory
</span><span class="hs-identifier hs-var">Format</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Token
</span><a href="#local-6989586621679241484"><span class="hs-identifier hs-var">unprintable</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><span class="annottext">GeneralCategory
</span><span class="hs-identifier hs-var">Surrogate</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Token
</span><a href="#local-6989586621679241484"><span class="hs-identifier hs-var">unprintable</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="annot"><span class="annottext">GeneralCategory
</span><span class="hs-identifier hs-var">PrivateUse</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Token
</span><a href="#local-6989586621679241484"><span class="hs-identifier hs-var">unprintable</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><span class="annottext">GeneralCategory
</span><span class="hs-identifier hs-var">NotAssigned</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Token
</span><a href="#local-6989586621679241484"><span class="hs-identifier hs-var">unprintable</span></a></span><span>
</span><span id="line-122"></span><span>    </span><span class="annot"><span class="annottext">GeneralCategory
</span><span class="hs-identifier hs-var">Control</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Token
</span><a href="#local-6989586621679241484"><span class="hs-identifier hs-var">unprintable</span></a></span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><span class="annottext">GeneralCategory
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Token
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679241484"><span class="annot"><span class="annottext">unprintable :: Maybe Token
</span><a href="#local-6989586621679241484"><span class="hs-identifier hs-var hs-var">unprintable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Token -&gt; Maybe Token
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Maybe Token) -&gt; Token -&gt; Maybe Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Word -&gt; Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Named"><span class="hs-identifier hs-var">Named</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;non-printable character (\\x&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char] -&gt; [Char]
forall a. Integral a =&gt; a -&gt; [Char] -&gt; [Char]
</span><span class="hs-identifier hs-var">showHex</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Int
</span><span class="hs-identifier hs-var">ord</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679241483"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#lexToken"><span class="hs-pragma hs-type">lexToken</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-127"></span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#lexToken"><span class="hs-identifier hs-type">lexToken</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-128"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#TokenExtractor"><span class="hs-identifier hs-type">TokenExtractor</span></a></span><span>
</span><span id="line-129"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#TokenExtractor"><span class="hs-identifier hs-type">TokenExtractor</span></a></span><span>
</span><span id="line-130"></span><span id="lexToken"><span class="annot"><span class="annottext">lexToken :: [Parsec [Char]] -&gt; TokenExtractor -&gt; TokenExtractor
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#lexToken"><span class="hs-identifier hs-var hs-var">lexToken</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NonEmpty ([Char], Word) -&gt; ([Char], Word))
-&gt; [Parsec [Char]] -&gt; TokenExtractor -&gt; TokenExtractor
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#lexTokenWithSelect"><span class="hs-identifier hs-var">lexTokenWithSelect</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(([Char], Word) -&gt; ([Char], Word) -&gt; Ordering)
-&gt; NonEmpty ([Char], Word) -&gt; ([Char], Word)
forall (t :: * -&gt; *) a.
Foldable t =&gt;
(a -&gt; a -&gt; Ordering) -&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">maximumBy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Word -&gt; Ordering)
-&gt; (([Char], Word) -&gt; Word)
-&gt; ([Char], Word)
-&gt; ([Char], Word)
-&gt; Ordering
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><span class="hs-operator hs-var">`on`</span></span><span> </span><span class="annot"><span class="annottext">([Char], Word) -&gt; Word
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#lexTokenWithSelect"><span class="hs-pragma hs-type">lexTokenWithSelect</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-133"></span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#lexTokenWithSelect"><span class="hs-identifier hs-type">lexTokenWithSelect</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-135"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#TokenExtractor"><span class="hs-identifier hs-type">TokenExtractor</span></a></span><span>
</span><span id="line-136"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#TokenExtractor"><span class="hs-identifier hs-type">TokenExtractor</span></a></span><span>
</span><span id="line-137"></span><span id="lexTokenWithSelect"><span class="annot"><span class="annottext">lexTokenWithSelect :: (NonEmpty ([Char], Word) -&gt; ([Char], Word))
-&gt; [Parsec [Char]] -&gt; TokenExtractor -&gt; TokenExtractor
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#lexTokenWithSelect"><span class="hs-identifier hs-var hs-var">lexTokenWithSelect</span></a></span></span><span> </span><span id="local-6989586621679241489"><span class="annot"><span class="annottext">NonEmpty ([Char], Word) -&gt; ([Char], Word)
</span><a href="#local-6989586621679241489"><span class="hs-identifier hs-var">selectToken</span></a></span></span><span> </span><span id="local-6989586621679241490"><span class="annot"><span class="annottext">[Parsec [Char]]
</span><a href="#local-6989586621679241490"><span class="hs-identifier hs-var">tokens</span></a></span></span><span> </span><span id="local-6989586621679241491"><span class="annot"><span class="annottext">TokenExtractor
</span><a href="#local-6989586621679241491"><span class="hs-identifier hs-var">extractItem</span></a></span></span><span> </span><span id="local-6989586621679241492"><span class="annot"><span class="annottext">NonEmpty Char
</span><a href="#local-6989586621679241492"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621679241493"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679241493"><span class="hs-identifier hs-var">parserDemanded</span></a></span></span><span> </span><span id="local-6989586621679241494"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679241494"><span class="hs-identifier hs-var">lexical</span></a></span></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679241494"><span class="hs-identifier hs-var">lexical</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TokenExtractor
</span><a href="#local-6989586621679241491"><span class="hs-identifier hs-var">extractItem</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty Char
</span><a href="#local-6989586621679241492"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679241493"><span class="hs-identifier hs-var">parserDemanded</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty Char -&gt; Token
</span><a href="#local-6989586621679241495"><span class="hs-identifier hs-var">extractToken</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty Char
</span><a href="#local-6989586621679241492"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><a href="#local-6989586621679241495"><span class="hs-identifier hs-type">extractToken</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span>
</span><span id="line-142"></span><span>    </span><span id="local-6989586621679241495"><span class="annot"><span class="annottext">extractToken :: NonEmpty Char -&gt; Token
</span><a href="#local-6989586621679241495"><span class="hs-identifier hs-var hs-var">extractToken</span></a></span></span><span> </span><span id="local-6989586621679241496"><span class="annot"><span class="annottext">NonEmpty Char
</span><a href="#local-6989586621679241496"><span class="hs-identifier hs-var">inp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-143"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Text.Gigaparsec.html#Success"><span class="hs-identifier hs-type">Success</span></a></span><span> </span><span id="local-6989586621679241499"><span class="annot"><span class="annottext">Either (NonEmpty ([Char], Word)) [Char]
</span><a href="#local-6989586621679241499"><span class="hs-identifier hs-var">rawOrToks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall err a.
ErrorBuilder err =&gt;
Parsec a -&gt; [Char] -&gt; Result err a
</span><a href="Text.Gigaparsec.html#parse"><span class="hs-identifier hs-var">parse</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><span class="annottext">Parsec (Either (NonEmpty ([Char], Word)) [Char])
</span><a href="#local-6989586621679241500"><span class="hs-identifier hs-var">parser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty Char -&gt; [Char]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NonEmpty.toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Char
</span><a href="#local-6989586621679241496"><span class="hs-identifier hs-var">inp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(NonEmpty ([Char], Word) -&gt; Token)
-&gt; ([Char] -&gt; Token)
-&gt; Either (NonEmpty ([Char], Word)) [Char]
-&gt; Token
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([Char] -&gt; Word -&gt; Token) -&gt; ([Char], Word) -&gt; Token
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Word -&gt; Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Named"><span class="hs-identifier hs-var">Named</span></a></span><span> </span><span class="annot"><span class="annottext">(([Char], Word) -&gt; Token)
-&gt; (NonEmpty ([Char], Word) -&gt; ([Char], Word))
-&gt; NonEmpty ([Char], Word)
-&gt; Token
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty ([Char], Word) -&gt; ([Char], Word)
</span><a href="#local-6989586621679241489"><span class="hs-identifier hs-var">selectToken</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Token
</span><a href="Text.Gigaparsec.Errors.TokenExtractors.html#Raw"><span class="hs-identifier hs-var">Raw</span></a></span><span> </span><span class="annot"><span class="annottext">Either (NonEmpty ([Char], Word)) [Char]
</span><a href="#local-6989586621679241499"><span class="hs-identifier hs-var">rawOrToks</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><a href="#local-6989586621679241500"><span class="hs-identifier hs-type">parser</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.Gigaparsec.Internal.html#Parsec"><span class="hs-identifier hs-type">Parsec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>    </span><span id="local-6989586621679241500"><span class="annot"><span class="annottext">parser :: Parsec (Either (NonEmpty ([Char], Word)) [Char])
</span><a href="#local-6989586621679241500"><span class="hs-identifier hs-var hs-var">parser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-148"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679241507"><span class="annot"><span class="annottext">toks :: Parsec (NonEmpty ([Char], Word))
</span><a href="#local-6989586621679241507"><span class="hs-identifier hs-var hs-var">toks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Maybe ([Char], Word)] -&gt; Maybe (NonEmpty ([Char], Word)))
-&gt; Parsec [Maybe ([Char], Word)]
-&gt; Parsec (NonEmpty ([Char], Word))
forall a b. (a -&gt; Maybe b) -&gt; Parsec a -&gt; Parsec b
</span><a href="Text.Gigaparsec.html#mapMaybeS"><span class="hs-identifier hs-var">mapMaybeS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[([Char], Word)] -&gt; Maybe (NonEmpty ([Char], Word))
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">nonEmpty</span></span><span> </span><span class="annot"><span class="annottext">([([Char], Word)] -&gt; Maybe (NonEmpty ([Char], Word)))
-&gt; ([Maybe ([Char], Word)] -&gt; [([Char], Word)])
-&gt; [Maybe ([Char], Word)]
-&gt; Maybe (NonEmpty ([Char], Word))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Maybe ([Char], Word)] -&gt; [([Char], Word)]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Parsec [Char] -&gt; Parsec (Maybe ([Char], Word)))
-&gt; [Parsec [Char]] -&gt; Parsec [Maybe ([Char], Word)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679241509"><span class="annot"><span class="annottext">Parsec [Char]
</span><a href="#local-6989586621679241509"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Parsec ([Char], Word) -&gt; Parsec (Maybe ([Char], Word))
forall a. Parsec a -&gt; Parsec (Maybe a)
</span><a href="Text.Gigaparsec.Combinator.html#option"><span class="hs-identifier hs-var">option</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parsec ([Char], Word) -&gt; Parsec ([Char], Word)
forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.html#lookAhead"><span class="hs-identifier hs-var">lookAhead</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parsec [Char] -&gt; Parsec [Char]
forall a. Parsec a -&gt; Parsec a
</span><a href="Text.Gigaparsec.html#atomic"><span class="hs-identifier hs-var">atomic</span></a></span><span> </span><span class="annot"><span class="annottext">Parsec [Char]
</span><a href="#local-6989586621679241509"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Parsec [Char] -&gt; Parsec Word -&gt; Parsec ([Char], Word)
forall a b. Parsec a -&gt; Parsec b -&gt; Parsec (a, b)
</span><a href="Text.Gigaparsec.html#%3C~%3E"><span class="hs-operator hs-var">&lt;~&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Parsec Word
</span><a href="Text.Gigaparsec.Position.html#offset"><span class="hs-identifier hs-var">offset</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Parsec [Char]]
</span><a href="#local-6989586621679241490"><span class="hs-identifier hs-var">tokens</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>          </span><span id="local-6989586621679241515"><span class="annot"><span class="annottext">rawTok :: Parsec [Char]
</span><a href="#local-6989586621679241515"><span class="hs-identifier hs-var hs-var">rawTok</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parsec Char -&gt; Parsec [Char]
forall a. Parsec a -&gt; Parsec [a]
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f [a]
</span><span class="hs-identifier hs-var">some</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Parsec [Char] -&gt; Parsec ()) -&gt; [Parsec [Char]] -&gt; Parsec [()]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Parsec [Char] -&gt; Parsec ()
forall a. Parsec a -&gt; Parsec ()
</span><a href="Text.Gigaparsec.html#notFollowedBy"><span class="hs-identifier hs-var">notFollowedBy</span></a></span><span> </span><span class="annot"><span class="annottext">[Parsec [Char]]
</span><a href="#local-6989586621679241490"><span class="hs-identifier hs-var">tokens</span></a></span><span> </span><span class="annot"><span class="annottext">Parsec [()] -&gt; Parsec Char -&gt; Parsec Char
forall a b. Parsec a -&gt; Parsec b -&gt; Parsec b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parsec Char
</span><a href="Text.Gigaparsec.Char.html#item"><span class="hs-identifier hs-var">item</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Parsec (NonEmpty ([Char], Word))
</span><a href="#local-6989586621679241507"><span class="hs-identifier hs-var">toks</span></a></span><span> </span><span class="annot"><span class="annottext">Parsec (NonEmpty ([Char], Word))
-&gt; Parsec [Char]
-&gt; Parsec (Either (NonEmpty ([Char], Word)) [Char])
forall a b. Parsec a -&gt; Parsec b -&gt; Parsec (Either a b)
</span><a href="Text.Gigaparsec.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Parsec [Char]
</span><a href="#local-6989586621679241515"><span class="hs-identifier hs-var">rawTok</span></a></span><span>
</span><span id="line-152"></span></pre></body></html>